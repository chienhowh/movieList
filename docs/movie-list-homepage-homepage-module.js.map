{"version":3,"sources":["./src/app/core/pipes/genre.pipe.ts","./src/app/core/pipes/sanitize-url.pipe.ts","./src/app/core/pipes/text-ellipsis.pipe.ts","./src/app/model/page.ts","./src/app/movie-list/homepage/carousel/carousel.component.ts","./src/app/movie-list/homepage/carousel/carousel.component.html","./src/app/movie-list/homepage/homepage-routing.module.ts","./src/app/movie-list/homepage/homepage.component.ts","./src/app/movie-list/homepage/homepage.component.html","./src/app/movie-list/homepage/homepage.module.ts","./src/app/movie-list/homepage/search-result/search-result.component.ts","./src/app/movie-list/homepage/search-result/search-result.component.html"],"names":[],"mappings":"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","file":"movie-list-homepage-homepage-module.js","sourcesContent":["import { Pipe, PipeTransform, OnInit } from '@angular/core';\n\n@Pipe({\n  name: 'genre'\n})\nexport class GenrePipe implements PipeTransform {\n\n  genreLists: [{ id: number, name: string }] = JSON.parse(sessionStorage.getItem('genres'));\n\n  transform(genresNum: any, ...args: unknown[]): unknown {\n    const genreTypes = this.genreLists.filter(genre =>\n      genresNum.includes(genre.id)\n    );\n    return genreTypes.map(genre => genre.name);\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'sanitizeURL'\n})\nexport class SanitizeURLPipe implements PipeTransform {\n  constructor(private sanitize: DomSanitizer) {\n\n  }\n  transform(url: string, args?: any): SafeUrl {\n\n    return this.sanitize.bypassSecurityTrustUrl(`${url}`);\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'textEllipsis'\n})\nexport class TextEllipsisPipe implements PipeTransform {\n\n  transform(value: string, length: number): unknown {\n    const ellipsisLength: number = length || 200;\n    if (value.length > ellipsisLength) {\n      return value.substring(0, ellipsisLength - 1) + '...';\n    }\n    return value;\n  }\n\n}\n","export class Page {\n  /** which page */\n  paging: number;\n  /** total length */\n  total_pages: number;\n  total_results: number;\n  constructor(paging: number = 1, length: number = 10) {\n    this.paging = paging;\n    this.total_results = length;\n  }\n}\n","import { MovieRequestService } from './../../../core/services/movie-request.service';\nimport { Component, Input, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { API, API_POSTER } from '../../consts/global-constants.const';\nimport { IMovieInfo, IResponse } from '../../../core/interfaces/movie.interface';\nimport { MovieDetailComponent } from '../movie-detail/movie-detail.component';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n\n\n@Component({\n  selector: 'app-carousel',\n  templateUrl: './carousel.component.html',\n  styleUrls: ['./carousel.component.scss']\n})\nexport class CarouselComponent implements OnInit {\n  /**\n   * 此表單標題\n   */\n  @Input() searchTitle;\n  @Input() searchApi: string;\n  API_POSTER = API_POSTER;\n  movieList$: Observable<any[]>;\n  constructor(\n    public dialog: MatDialog,\n    private movieRequestService: MovieRequestService,\n  ) { }\n\n  ngOnInit(): void {\n    this.movieList$ = this.movieRequestService.request(API.GET, `/movie/${this.searchApi}`)\n      .pipe(map(res => [...res.results]));\n  }\n\n  /**\n   * 跳出顯示電影詳情視窗\n   * 資料不完全所以movieDetail要再用id call一次\n   */\n  onWatchDetail(info): void {\n    const dialogRef = this.dialog.open(MovieDetailComponent, {\n      width: '500px', data: { info, callAgain: true }\n    });\n\n    dialogRef.afterClosed().subscribe(res => console.log('this diaglo was closed' + res));\n  }\n}\n","<h1>{{ searchTitle }}</h1>\n<carousel\n  [height]=\"300\"\n  [cellWidth]=\"150\"\n  [cellsToScroll]=\"3\"\n  *ngIf=\"movieList$ | async as movieList; else Loading\"\n>\n  <div\n    class=\"carousel-cell\"\n    *ngFor=\"let movie of movieList\"\n    (click)=\"onWatchDetail(movie)\"\n  >\n    <div class=\"img-box\">\n      <img src=\"{{ API_POSTER.GET_POSTER + movie.poster_path }}\" alt=\"\" />\n    </div>\n    <div class=\"info-box position-relative\">\n      <div class=\"rate-box\">\n        <app-rate-icon [rate]=\"movie.vote_average\"></app-rate-icon>\n      </div>\n      <h6 class=\"pt-3 font-weight-bold\">{{ movie.title }}</h6>\n    </div>\n  </div>\n</carousel>\n<ng-template #Loading>Loading</ng-template>\n","import { SearchResultGuard } from './../../core/guard/search-result.guard';\nimport { SearchResultComponent } from './search-result/search-result.component';\nimport { HomepageComponent } from './homepage.component';\nimport { RouterModule, Routes } from '@angular/router';\nimport { NgModule } from '@angular/core';\n\nconst routes: Routes = [\n  { path: '', component: HomepageComponent },\n  { path: 'search', component: SearchResultComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomepageRoutingModule {\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { MovieRequestService } from 'src/app/core/services/movie-request.service';\nimport { API } from '../consts/global-constants.const';\n\n\n@Component({\n  selector: 'app-homepage',\n  templateUrl: './homepage.component.html',\n  styleUrls: ['./homepage.component.scss']\n})\nexport class HomepageComponent implements OnInit {\n  searchText = '';\n  constructor(\n    private movieRequestService: MovieRequestService,\n    private router: Router\n  ) { }\n  ngOnInit(): void {\n    this.getGenreList();\n  }\n\n\n\n  getGenreList(): void {\n    this.movieRequestService.request(API.GET, API.GENRE_LIST).subscribe(res => {\n      sessionStorage.setItem('genres', JSON.stringify([...res.genres]));\n    });\n  }\n\n  searchMovie() {\n    if (!this.searchText) { return; }\n    this.router.navigate(['home', 'search'], { state: { query: this.searchText } });\n  }\n}\n","<div class=\"container-xl\">\n  <section class=\"search-box\">\n    <div class=\"title\">\n      <h2>Welcome.</h2>\n      <h3>Millions of movies, TV shows and people to discover. Explore now.</h3>\n    </div>\n    <div class=\"search text-center\">\n        <input matInput  placeholder=\"Search for a movie...\" [(ngModel)]=\"searchText\" class=\"mr-1 input\"/>\n      <button mat-raised-button color=\"primary\" class=\"search-btn\" (click)=\"searchMovie()\">Search</button>\n    </div>\n  </section>\n  <!-- Movie List Start -->\n  <app-carousel [searchTitle]=\"'Latest'\" [searchApi]=\"'now_playing'\"></app-carousel>\n  <app-carousel [searchTitle]=\"'Hottest'\" [searchApi]=\"'top_rated'\"></app-carousel>\n  <app-carousel [searchTitle]=\"'Popular'\" [searchApi]=\"'popular'\"></app-carousel>\n  <app-carousel [searchTitle]=\"'Upcoming'\" [searchApi]=\"'upcoming'\"></app-carousel>\n</div>\n","import { TextEllipsisPipe } from './../../core/pipes/text-ellipsis.pipe';\nimport { GenrePipe } from './../../core/pipes/genre.pipe';\nimport { SanitizeURLPipe } from './../../core/pipes/sanitize-url.pipe';\nimport { SharedModule } from './../../shared/shared.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HomepageComponent } from './homepage.component';\nimport { HomepageRoutingModule} from './homepage-routing.module';\nimport { CarouselComponent } from './carousel/carousel.component';\nimport { MovieDetailComponent } from './movie-detail/movie-detail.component';\nimport {SearchResultComponent} from './search-result/search-result.component';\nimport { FormsModule } from '@angular/forms';\n\n\n@NgModule({\n  declarations: [\n    HomepageComponent,\n    CarouselComponent,\n    MovieDetailComponent,\n    SearchResultComponent,\n    SanitizeURLPipe,\n    GenrePipe,\n    TextEllipsisPipe\n  ],\n  imports: [\n    CommonModule,\n    HomepageRoutingModule,\n    SharedModule,\n    FormsModule\n  ]\n})\nexport class HomepageModule { }\n","import { API_POSTER } from './../../consts/global-constants.const';\nimport { IMovieInfo, IResponse, IKeyword } from './../../../core/interfaces/movie.interface';\n\nimport { MovieRequestService } from './../../../core/services/movie-request.service';\nimport { AfterViewInit, Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { API } from '../../consts/global-constants.const';\nimport { Page } from '../../../model/page';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MovieDetailComponent } from '../movie-detail/movie-detail.component';\nimport { PageEvent } from '@angular/material/paginator';\n\n\n\n@Component({\n  selector: 'app-search-result',\n  templateUrl: './search-result.component.html',\n  styleUrls: ['./search-result.component.scss']\n})\nexport class SearchResultComponent implements OnInit, AfterViewInit {\n  // 搜尋字串\n  query: string;\n  // 海報網址\n  API_POSTER = API_POSTER;\n  displayList: IMovieInfo[] = [];\n  page = new Page();\n  pageEvent: PageEvent;\n  constructor(\n    public dialog: MatDialog,\n    private router: Router,\n    private movieRequestService: MovieRequestService\n  ) { }\n\n  ngOnInit(): void {\n    this.query = history.state.query;\n    if (!this.query) { this.router.navigateByUrl('/'); }\n    this.searchQuery();\n  }\n  ngAfterViewInit(): void {\n  }\n\n  /**\n   * 針對字串搜尋符合電影列表\n   */\n  searchQuery() {\n    const sendData = { query: this.query, page: this.page.paging };\n    console.log(this.query);\n\n    this.movieRequestService.request(API.GET, API.SEARCH_MOVIE, sendData).subscribe(\n      (res: IResponse) => {\n        const details = res.results;\n        this.page.total_results = res.total_results;\n        this.displayList = [];\n        details.forEach(movie => {\n          this.searchMovieById(movie);\n        });\n      }\n    );\n  }\n\n  /**\n   * 用ID 摳詳細資訊\n   */\n  searchMovieById(movie: IKeyword) {\n    this.movieRequestService.request(API.GET, `${API.MOVIE}/${movie.id}`, { language: 'en-US' }).subscribe(\n      detail => {\n        this.displayList.push(detail);\n      },\n      err => console.log('err:', err)\n    );\n  }\n\n  changePage(pageEvent: PageEvent) {\n    this.page.paging = pageEvent.pageIndex;\n    this.searchQuery();\n    window.scrollTo({ top: 0 }); // 回到上層\n  }\n\n  /**\n   * 跳出顯示電影詳情視窗\n   *\n   */\n  onWatchDetail(info: IMovieInfo): void {\n    const dialogRef = this.dialog.open(MovieDetailComponent, {\n      width: '500px', data: { info, callAgain: false }\n    });\n    dialogRef.afterClosed().subscribe(res => console.log('this diaglo was closed' + res));\n  }\n\n  imgError(event) {\n    event.target.src = 'assets/not-found.jpeg';\n    event.target.style.height = '180px';\n  }\n}\n","<ng-container *ngFor=\"let movie of displayList\">\n  <div class=\"card-box\" (click)=\"onWatchDetail(movie)\">\n    <div class=\"row no-gutters\">\n      <div class=\"col-4\">\n        <div class=\"img-box mx-auto\">\n          <img\n            (error)=\"imgError($event)\"\n            src=\"{{ API_POSTER.GET_POSTER + movie.poster_path }}\"\n            alt=\"\"\n          />\n        </div>\n      </div>\n      <div class=\"col-8 overview-box p-2\">\n        <h5>{{ movie.title }}</h5>\n        <p class=\"mb-2\">{{ movie.release_date }}</p>\n        <div #overview class=\"overview\">\n          {{ movie.overview ? movie.overview : \"尚無介紹\" }}\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-container>\n<mat-paginator\nclass=\"test\"\n  [length]=\"page.total_results\"\n  [pageIndex]=\"page.paging - 1\"\n  [pageSize]=\"20\"\n  (page)=\"changePage($event)\"\n>\n</mat-paginator>\n"],"sourceRoot":"webpack:///"}