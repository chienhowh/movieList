{"version":3,"sources":["./src/app/movie-list/watchlist/comment/comment.component.ts","./src/app/movie-list/watchlist/comment/comment.component.html","./src/app/movie-list/watchlist/watched-movie/watched-movie.component.ts","./src/app/movie-list/watchlist/watched-movie/watched-movie.component.html","./src/app/movie-list/watchlist/watchlist-routing.module.ts","./src/app/movie-list/watchlist/watchlist.component.ts","./src/app/movie-list/watchlist/watchlist.component.html","./src/app/movie-list/watchlist/watchlist.module.ts","./src/app/movie-list/watchlist/watchlist.service.ts"],"names":[],"mappings":"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","file":"movie-list-watchlist-watchlist-module.js","sourcesContent":["import { DetailService } from './../../homepage/shared/detail.service';\nimport { IWatchedMovie } from './../shared/watchlist';\nimport { Component, Inject, Input, OnInit } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { IMovieInfo } from 'src/app/core/interfaces/movie.interface';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n@Component({\n  selector: 'app-comment',\n  templateUrl: './comment.component.html',\n  styleUrls: ['./comment.component.scss']\n})\nexport class CommentComponent implements OnInit {\n  movieForm: FormGroup = this.fb.group({\n    watchedDate: [new Date(), Validators.required],\n    comment: ['', Validators.required]\n  });\n  movie: IWatchedMovie;\n  constructor(\n    private fb: FormBuilder,\n    public dialogRef: MatDialogRef<CommentComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: { movie: IWatchedMovie },\n    private detailService: DetailService\n  ) { }\n\n  ngOnInit(): void {\n    this.movie = this.data.movie;\n  }\n\n  patchMovie(id: number) {\n    const formControls = this.movieForm.controls;\n    for (let i in formControls) {\n      if (i) {\n        formControls[i].markAsDirty;\n        formControls[i].updateValueAndValidity;\n      }\n    }\n    if (this.movieForm.invalid) { return; }\n    const value = this.movieForm.value;\n    this.detailService.patchMovie(id, { beenWatched: true, ...value }).subscribe(res =>\n      this.dialogRef.close(res)\n    );\n  }\n}\n","<h4>{{ movie.title }}</h4>\n<form [formGroup]=\"movieForm\">\n  <mat-form-field appearance=\"fill\">\n    <input matInput [matDatepicker]=\"picker\" formControlName=\"watchedDate\"/>\n    <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\n    <mat-datepicker #picker></mat-datepicker>\n    <mat-error *ngIf=\"true\">aaa</mat-error>\n  </mat-form-field>\n  <!-- 評論區 -->\n  <mat-form-field appearance=\"fill\">\n    <mat-label>Leave a comment</mat-label>\n    <textarea matInput placeholder=\"Ex. It makes me feel...\" formControlName=\"comment\"></textarea>\n    <mat-error *ngIf=\"movieForm.invalid\">bbb</mat-error>\n  </mat-form-field>\n</form>\n\n<mat-dialog-actions>\n  <button mat-raised-button color=\"primary\" (click)=\"patchMovie(movie.id)\">\n    submit\n  </button>\n  <button mat-raised-button mat-dialog-close color=\"accent\">exit</button>\n</mat-dialog-actions>\n","import { Observable } from 'rxjs';\nimport { Component, Inject, OnInit } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { DetailService } from '../../homepage/shared/detail.service';\nimport { IWatchedMovie } from '../shared/watchlist';\n\n@Component({\n  selector: 'app-watched-movie',\n  templateUrl: './watched-movie.component.html',\n  styleUrls: ['./watched-movie.component.scss']\n})\nexport class WatchedMovieComponent implements OnInit {\n  id: number;\n  $movie: Observable<IWatchedMovie>;\n\n  constructor(\n    public dialogRef: MatDialogRef<WatchedMovieComponent>,\n    @Inject(MAT_DIALOG_DATA) public data,\n    private detailService: DetailService\n  ) { }\n\n  ngOnInit(): void {\n    this.id = this.data.id;\n    this.$movie = this.detailService.readList(this.id);\n  }\n}\n","<ng-container *ngIf=\"$movie | async as movie; else Loading\">\n  <h4>{{ movie.title }}</h4>\n  <p>{{ movie.watchedDate | date: \"MMM d, y\" }}</p>\n  <p>{{ movie.comment }}</p>\n</ng-container>\n<ng-template #Loading>Loading</ng-template>\n","import { WatchlistComponent } from './watchlist.component';\nimport { RouterModule, Routes } from '@angular/router';\nimport { NgModule } from '@angular/core';\n\nconst routes: Routes = [\n  { path: '', component: WatchlistComponent }\n]\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class WatchlistRoutingModule {\n\n}\n","import { WatchedMovieComponent } from './watched-movie/watched-movie.component';\nimport { CommentComponent } from './comment/comment.component';\nimport { DetailService } from './../homepage/shared/detail.service';\nimport { WatchlistService } from './watchlist.service';\nimport { API_POSTER } from './../consts/global-constants.const';\nimport { Component, OnInit } from '@angular/core';\nimport { IMovieInfo } from 'src/app/core/interfaces/movie.interface';\nimport { IWatchedMovie } from './shared/watchlist';\nimport { MatDialog } from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-watchlist',\n  templateUrl: './watchlist.component.html',\n  styleUrls: ['./watchlist.component.scss']\n})\nexport class WatchlistComponent implements OnInit {\n  API_POSTER = API_POSTER;\n  /** 電影詳細資料列表 */\n  displayList: IMovieInfo[] = [];\n  /** 待播清單號碼 */\n  unWatchedList: IWatchedMovie[] = [];\n  watchedList: IWatchedMovie[] = [];\n\n  constructor(\n    private watchlistService: WatchlistService,\n    private detailService: DetailService,\n    public dialog: MatDialog,\n  ) { }\n\n  ngOnInit() {\n    this.getWatchList();\n  }\n\n\n\n  getWatchList() {\n    this.refreshList();\n    this.watchlistService.getWatchLists().subscribe((res: IWatchedMovie[]) => {\n      res.map(movie => {\n        if (movie.beenWatched) { this.watchedList.push(movie); }\n        else { this.unWatchedList.push(movie); }\n      });\n    });\n  }\n\n  /** 查心得 */\n  getDetailById(id: number) {\n    const dialogRef = this.dialog.open(WatchedMovieComponent, {\n      width: '500px', data: { id }\n    });\n\n    dialogRef.afterClosed().subscribe(res => console.log('this diaglo was closed' + res));\n  }\n\n  writeComment(movie: IWatchedMovie): void {\n    const dialogRef = this.dialog.open(CommentComponent, {\n      width: '500px', data: { movie }\n    });\n\n    dialogRef.afterClosed().subscribe(res => {\n      if (res) { this.getWatchList(); }\n    });\n  }\n\n\n  removeList(id: number, event: Event) {\n    event.stopPropagation();\n    this.detailService.removeList(id).subscribe(() => this.getWatchList());\n  }\n\n  refreshList() {\n    this.watchedList = [];\n    this.unWatchedList = [];\n  }\n}\n","<div class=\"container-xl\">\n  <mat-tab-group>\n    <!-- Unwatched Start -->\n    <mat-tab label=\"Unwatched\">\n      <ul>\n        <ng-container *ngFor=\"let item of unWatchedList\">\n          <li class=\"title\" (click)=\"writeComment(item)\">\n            {{ item.title }}\n            <span class=\"close\" (click)=\"removeList(item.id, $event)\">x</span>\n          </li>\n        </ng-container>\n      </ul>\n    </mat-tab>\n    <!-- Watched Start -->\n    <mat-tab label=\"Watched\"\n      ><ul>\n        <ng-container *ngFor=\"let item of watchedList\">\n          <li class=\"title\" (click)=\"getDetailById(item.id)\">\n            <div>{{ item.title }}</div>\n            <span class=\"close\" (click)=\"removeList(item.id, $event)\">x</span>\n          </li>\n        </ng-container>\n      </ul>\n    </mat-tab>\n  </mat-tab-group>\n</div>\n","import { SharedModule } from './../../shared/shared.module';\nimport { WatchlistComponent } from './watchlist.component';\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {WatchlistRoutingModule} from './watchlist-routing.module';\nimport { CommentComponent } from './comment/comment.component'\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { WatchedMovieComponent } from './watched-movie/watched-movie.component';\n\n\n\n\n@NgModule({\n  declarations: [\n    WatchlistComponent,\n    CommentComponent,\n    WatchedMovieComponent\n  ],\n  imports: [\n    CommonModule,\n    WatchlistRoutingModule,\n    SharedModule,\n    ReactiveFormsModule,\n    FormsModule\n  ]\n})\nexport class WatchlistModule { }\n","import { MovieRequestService } from 'src/app/core/services/movie-request.service';\nimport { Injectable } from '@angular/core';\nimport { API } from '../consts/global-constants.const';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WatchlistService {\n\n  constructor(\n    private requestService: MovieRequestService\n  ) { }\n\n  /** 取得ＤＢ所有電影 */\n  getWatchLists() {\n   return this.requestService.dbRequest(API.GET, API.WATCHLIST);\n  }\n\n\n}\n"],"sourceRoot":"webpack:///"}